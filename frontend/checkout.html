<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <title>Thanh toÃ¡n - GEARCLONE</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
  <script src="js/order.js" defer></script>
  <script src="js/main.js" defer></script>
  <style>
    .form-section {
      background-color: #f8f9fa;
      padding: 2rem;
      border-radius: 8px;
    }
  </style>
</head>

<body>

  <!-- ğŸ” Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand fw-bold" href="index.html">GEARCLONE</a>
      <!-- ğŸ” Search -->
      <form class="d-flex align-items-center ms-auto me-3 position-relative" role="search" id="searchForm"
        style="max-width: 300px;">
        <input class="form-control form-control-sm me-2" type="search" placeholder="TÃ¬m sáº£n pháº©m..." id="searchInput"
          autocomplete="off">
        <button class="btn btn-sm btn-outline-light" type="submit">TÃ¬m</button>
        <div id="searchSuggestions" class="list-group position-absolute"
          style="top: 100%; left: 0; right: 0; z-index: 9999; display: none;"></div>
      </form>
      <div class="dropdown me-3" id="user-info-dropdown" style="display: none;">
        <a href="#" class="btn btn-outline-light dropdown-toggle" id="userDropdown" data-bs-toggle="dropdown"
          aria-expanded="false">
          ğŸ‘‹ Xin chÃ o, <span id="username-display"></span>
        </a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="profile.html">ğŸ‘¤ Chá»‰nh sá»­a thÃ´ng tin</a></li>
          <li><a class="dropdown-item" href="order-history.html">ğŸ“¦ Xem Ä‘Æ¡n hÃ ng</a></li>
          <li><a class="dropdown-item" href="admin-dashboard.html" id="admin-link" style="display: none;">ğŸ›  Admin </a>
          </li>
          <li><a class="dropdown-item text-danger" href="#" id="logoutBtn">ğŸ”“ ÄÄƒng xuáº¥t</a></li>
        </ul>
      </div>
      <div id="user-login-link" class="text-white me-3">
        <a href="login.html" class="text-white text-decoration-none">ğŸ” ÄÄƒng nháº­p</a>
      </div>
      <a href="cart.html" class="btn btn-outline-light">ğŸ›’ Giá» hÃ ng</a>
    </div>
  </nav>

  <!-- ğŸ§¾ Thanh toÃ¡n -->
  <div class="container my-5">
    <div class="row">
      <!-- ğŸšš ThÃ´ng tin giao hÃ ng -->
      <div class="col-md-6">
        <div class="form-section">
          <h4>ğŸšš ThÃ´ng tin giao hÃ ng</h4>

          <!-- âœ… Form Báº®T Äáº¦U tá»« Ä‘Ã¢y -->
          <form id="checkoutForm">

            <div class="mb-3">
              <label for="fullname" class="form-label">Há» tÃªn:</label>
              <input type="text" class="form-control" id="fullname" required>
            </div>
            <div class="mb-3">
              <label for="address" class="form-label">Äá»‹a chá»‰:</label>
              <input type="text" class="form-control" id="address" required>
            </div>
            <div class="mb-3">
              <label for="phone" class="form-label">Sá»‘ Ä‘iá»‡n thoáº¡i:</label>
              <input type="text" class="form-control" id="phone" required>
            </div>
            <div class="mb-3">
              <label for="note" class="form-label">Ghi chÃº:</label>
              <textarea class="form-control" id="note" rows="2"></textarea>
            </div>

            <div class="mb-3">
              <label class="form-label">PhÆ°Æ¡ng thá»©c thanh toÃ¡n:</label>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="paymentMethod" id="cod" value="COD" checked>
                <label class="form-check-label" for="cod">
                  ğŸ’µ Thanh toÃ¡n khi nháº­n hÃ ng (COD)
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="paymentMethod" id="bank" value="BANK">
                <label class="form-check-label" for="bank">
                  ğŸ¦ Chuyá»ƒn khoáº£n ngÃ¢n hÃ ng
                </label>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label text-success">
                ğŸ Báº¡n cÃ³ <span id="loyaltyPointDisplay">0</span> Ä‘iá»ƒm thÆ°á»Ÿng (1 Ä‘iá»ƒm = 1000Ä‘)
              </label>

              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="useLoyaltyCheckbox">
                <label class="form-check-label" for="useLoyaltyCheckbox">
                  Sá»­ dá»¥ng Ä‘iá»ƒm thÆ°á»Ÿng
                </label>
              </div>

              <div class="mt-2" id="loyaltyInputGroup" style="display: none;">
                <input type="number" id="loyaltyUsedInput" class="form-control" min="0" step="1"
                  placeholder="Nháº­p sá»‘ Ä‘iá»ƒm muá»‘n dÃ¹ng">
                <small class="text-muted">Nháº­p sá»‘ Ä‘iá»ƒm báº¡n cÃ³ .</small>
              </div>
            </div>



            <div class="mb-3">
              <label for="discountCode" class="form-label">ğŸ”– MÃ£ giáº£m giÃ¡:</label>
              <div class="input-group">
                <input type="text" class="form-control" id="discountCode" placeholder="Nháº­p mÃ£...">
                <button type="button" class="btn btn-outline-secondary" id="applyDiscountBtn">Ãp dá»¥ng</button>
              </div>
              <small id="discountFeedback" class="text-success d-block mt-1"></small>
            </div>

            <button type="submit" class="btn btn-primary w-100 mt-3">âœ… Äáº·t hÃ ng</button>
          </form>
          <!-- âœ… Form Káº¾T THÃšC táº¡i Ä‘Ã¢y -->

        </div>
      </div>

      <!-- ğŸ§¾ TÃ³m táº¯t Ä‘Æ¡n hÃ ng -->
      <div class="col-md-6">
        <div class="form-section">
          <h4>ğŸ§¾ TÃ³m táº¯t Ä‘Æ¡n hÃ ng</h4>
          <ul class="list-group mb-3" id="order-summary">
            <!-- Inject tá»«ng dÃ²ng sáº£n pháº©m táº¡i Ä‘Ã¢y -->
          </ul>
          <h6 class="text-end text-success" id="discount-amount" style="display: none;">
            âœ… Báº¡n Ä‘Ã£ Ä‘Æ°á»£c giáº£m: <span id="discount-value">0Ä‘</span>
          </h6>
          <h6 class="text-end text-success" id="loyalty-discount-amount" style="display: none;">
            ğŸ ÄÃ£ dÃ¹ng Ä‘iá»ƒm giáº£m: <span id="loyalty-discount-value">0Ä‘</span>
          </h6>

          <h5 class="text-end">Tá»•ng cá»™ng: <span class="text-danger fw-bold" id="total-price">0Ä‘</span></h5>


        </div>
      </div>
    </div>
  </div>

  <!-- ğŸ¦¶ Footer -->
  <footer class="bg-dark text-white text-center py-3">
    &copy; 2025 GEARCLONE. Powered by Node.js & MongoDB.
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const userData = localStorage.getItem("user");
      const dropdown = document.getElementById("user-info-dropdown");
      const loginLink = document.getElementById("user-login-link");
      const usernameSpan = document.getElementById("username-display");

      if (userData) {
        const user = JSON.parse(userData);
        dropdown.style.display = "block";
        loginLink.style.display = "none";
        usernameSpan.textContent = user.name || "User";

        document.getElementById("logoutBtn").addEventListener("click", () => {
          localStorage.removeItem("user");
          localStorage.removeItem("token");
          window.location.href = "index.html";
        });
      } else {
        dropdown.style.display = "none";
        loginLink.style.display = "block";
      }
    });
  </script>

</body>

</html>