<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Äáº·t hÃ ng thÃ nh cÃ´ng - GEARCLONE</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
  <style>
    .check-icon {
      font-size: 5rem;
      color: #28a745;
    }
    .order-box {
      background-color: #f8f9fa;
      padding: 2rem;
      border-radius: 8px;
    }
  </style>
</head>
<body>

<!-- ğŸ” Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand fw-bold" href="index.html">GEARCLONE</a>
    <a href="cart.html" class="btn btn-outline-light ms-auto">ğŸ›’ Giá» hÃ ng</a>
  </div>
</nav>

<!-- âœ… Ná»™i dung -->
<div class="container text-center my-5">
  <div class="order-box mx-auto" style="max-width: 600px;">
    <div class="check-icon mb-3">âœ…</div>
    <h2 class="text-success">Äáº·t hÃ ng thÃ nh cÃ´ng!</h2>
    <p>Cáº£m Æ¡n báº¡n Ä‘Ã£ mua sáº¯m táº¡i GEARCLONE.</p>
    <p>ThÃ´ng tin Ä‘Æ¡n hÃ ng Ä‘Ã£ Ä‘Æ°á»£c gá»­i Ä‘áº¿n email cá»§a báº¡n.</p>

    <!-- ... pháº§n HEAD giá»¯ nguyÃªn nhÆ° báº¡n gá»­i ... -->
<div id="order-summary" class="mt-4 text-start">
  <h5>ğŸ§¾ TÃ³m táº¯t Ä‘Æ¡n hÃ ng:</h5>
  <ul class="list-group" id="order-items"></ul>

  <!-- âœ… Hiá»ƒn thá»‹ khi dÃ¹ng Ä‘iá»ƒm -->
  <p id="point-line" class="text-end text-warning" style="display:none;">
    ğŸ ÄÃ£ dÃ¹ng Ä‘iá»ƒm thÆ°á»Ÿng: <span id="point-value">0</span> Ä‘iá»ƒm (-<span id="point-money">0</span>Ä‘)
  </p>

  <!-- âœ… Hiá»ƒn thá»‹ khi cÃ³ mÃ£ giáº£m giÃ¡ -->
  <p id="discount-line" class="text-end text-success" style="display:none;">
    ğŸ”– Giáº£m giÃ¡: <span id="discount-value"></span>
  </p>

  <p class="mt-3 fw-bold text-end">Tá»•ng cá»™ng: <span id="total-price" class="text-danger">0Ä‘</span></p>
</div>


    <a href="index.html" class="btn btn-primary mt-4">ğŸ”™ Quay vá» trang chá»§</a>
  </div>
</div>

<!-- ğŸ¦¶ Footer -->
<footer class="bg-dark text-white text-center py-3">
  &copy; 2025 GEARCLONE. Cáº£m Æ¡n báº¡n Ä‘Ã£ Ä‘á»“ng hÃ nh!
</footer>

<script>
  document.addEventListener("DOMContentLoaded", () => {
  const cart = JSON.parse(localStorage.getItem("lastOrder")) || [];
  const orderItems = document.getElementById("order-items");
  const totalSpan = document.getElementById("total-price");

  const discountLine = document.getElementById("discount-line");
  const discountValueSpan = document.getElementById("discount-value");
  const appliedDiscount = JSON.parse(localStorage.getItem("appliedDiscount")); // ğŸ‘ˆ láº¥y discount

  let total = 0;
  orderItems.innerHTML = "";

  cart.forEach(item => {
    const price = Number(item.price);
    const quantity = Number(item.quantity);
    const subtotal = price * quantity;
    total += subtotal;

    const li = document.createElement("li");
    li.className = "list-group-item d-flex justify-content-between";
    li.innerHTML = `
      <div>
        <strong>${item.name}</strong> <small class="text-muted">x${quantity}</small>
      </div>
      <span>${subtotal.toLocaleString()}Ä‘</span>
    `;
    orderItems.appendChild(li);
  });

  // ğŸ‘‡ Náº¿u cÃ³ giáº£m giÃ¡
  if (appliedDiscount) {
    const discountAmount = Math.floor(total * appliedDiscount.percent / 100);
    const finalTotal = total - discountAmount;

    discountValueSpan.textContent = `-${discountAmount.toLocaleString()}Ä‘ (${appliedDiscount.percent}%)`;
    discountLine.style.display = "block";

    totalSpan.textContent = finalTotal.toLocaleString() + "Ä‘";
  } else {
    totalSpan.textContent = total.toLocaleString() + "Ä‘";
  }
});

</script>

</body>
</html>
